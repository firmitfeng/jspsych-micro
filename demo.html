<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/global.css">
    <title>DEMO- Experiment</title>
</head>

<body>
    <div class="exp-wrap">
        <div id="exp"></div>
    </div>
    <div id="mask" class="hidden"></div>
    <script src="js/utils.js"></script>
    <script src="js/jspsy-micro.js"></script>

    <script type="text/javascript">

        (async function () {
            var s, kb, result;
            jspsych.init();
            jspsych.fillText({ x: 100, y: 100 });
            await jspsych.flip();
            s = await jspsych.waitMiSec(1000);
            console.log(s);
            await jspsych.render();
            await jspsych.waitMiSec(1000);
            jspsych.cleanScreen();
            // jspsych.render();
            jspsych.fillImg({ url: 'imgs/cross.jpg', x: 300, y: 200, w: 50, h: 50 });
            jspsych.putObjToCenter(jspsych.lastDOM);
            await jspsych.flip();
            await jspsych.render();
            await jspsych.waitMiSec(1000);
            jspsych.fillCircle();
            jspsych.putObjToCenter(jspsych.lastDOM);
            jspsych.fillRectangle({ x: 200, y: 200 });
            jspsych.fillRectangle({ x: 525, y: 200 });
            jspsych.fillText({ content: 'press any key to continue...', x: 100, y: 550, w: 600, h: 50, class_:['center-box'] });
            await jspsych.flip();
            await jspsych.render();
            kb = await jspsych.waitKB();
            console.log(kb);
            s = await jspsych.waitKBMiSec(2000);
            console.log(s);
            s = await jspsych.waitMiSec(1000);
            console.log(s);
            ///////////////////////////////////////////////////////////////////
            jspsych.fillText({ content: 'this is secend line <br> wait 2000ms', x: 100, y: 100, w: 200, h:20 });
            await jspsych.flip();
            await jspsych.render();
            logger.log = ('render 2nd line');
            jspsych.putObjToCenter(jspsych.lastDOM);
            logger.log = ('put 2nd line');
            s = await jspsych.waitMiSec(1000);
            console.log(s);
            await jspsych.flip();
            await jspsych.render();
            logger.log = ('render blank screen');
            await jspsych.waitMiSec(1000);
            jspsych.fillText({ content: 'this is 3rd line <br> click to continue...', x: 100, y: 100 });
            await jspsych.flip();
            await jspsych.render();
            logger.log = ('render 3rd line');
            s = await jspsych.waitClick();
            console.log(s);
            jspsych.cleanScreen();
            ///////////////////////////////////////////////////////////////////
            let line_arr = [];
            for(let i=0;i<6;i++){
                line_arr.push(jspsych.fillText({ content: `${i+1} this is a sentence.`, x: 100, y: 50+i*50, w: 600, h: 20, class_:['center-box', 'pointer'] }));
            }
            jspsych.fillText({ content: ' click to continue...', x: 100, y: 550, w: 600, h: 50, class_:['center-box'] });
            await jspsych.flip();
            await jspsych.render();
            s = await jspsych.waitClick(line_arr);
            console.log(s);
            ///////////////////////////////////////////////////////////////////
            let cross = jspsych.fillImg({ url: 'imgs/cross.jpg', x: 300, y: 200 });
            await jspsych.waitMiSec(1000);
            await jspsych.flip();
            await jspsych.render();
            await jspsych.waitMiSec(1000);
            let r_cross = jspsych.fillImg({ url: 'imgs/cross.jpg', x: 300, y: 200 });
            await jspsych.flip();
            for (let i = 0; i < 90; i++) {
                jspsych.rotateObj(r_cross, i + 1);

                await jspsych.render();
                // await jspsych.waitMiSec(50);
            }
        })();
        // window.requestAnimationFrame(jspsych.render);
    </script>
</body>

</html>

